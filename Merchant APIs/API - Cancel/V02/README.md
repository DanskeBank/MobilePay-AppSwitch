# CancelV02 service #
The service cancels a previously reserved or requested payment. The service can only be called for payments with status = RES (reserved), or REQ (requested).

### Input ###
|Parameter|Type|Description|
|:--------|:---|:----------|
|MerchantId|Char(60)|_Mandatory_. The MerchantId is generated by Danske Bank and sent to the merchant.|
|OrderId|Char(50)|_Mandatory_. The OrderId, which has originally sent to the MobilePay AppSwitch SDK (generated by merchant).|
|CustomerId|Char(60)|_Optional_. Identification of customer in MobilePay systems (phone number with prefix, e.g. +45).|
|DateFrom|Char(10)|_Optional_. A date minimum used when looking up transaction. Default is current date in format 'YYYYMMDD'.|
|DateTo|Char(10)|_Optional_. A date maximum used when looking up transaction. Default is current date in format 'YYYYMMDD'.|
|Test|Char(1)|_Optional_. Test flag: Y/N. Default is 'N'. If Test='Y': The service returns OK, but does not update any payments.|

### Output ###
|Parameter|Type|Description|
|:--------|:---|:----------|
|ReturnCode|Char(2)|See return code table below.|
|ReasonCode|Char(2)|See reason code table below.|
|OriginalTransactionId|Char(20)|TransactionId of the original reservation / payment.|

|Value|Text|Description|
|:----|:---|:----------|
|00|Ok|Ok|
|01|Invalid OrderId|OrderId is not specified or has an invalid value.|
|02|Invalid MerchantId|MerchantId is not specified or has an invalid value.|
|03|Invalid CustomerId|CustomerId is not specified or has an invalid value.|
|04|Invalid Test flag|Test has an invalid value.|
|09|Invalid Date|The date specified is invalid. DateFrom must be less than or equal to DateTo or format is wrong.|
|20|Merchant not found|The specified MerchantId could not be confirmed as an active Danske Bank customer.|
|21|Order not found|The specified OrderId for an existing order was not found in the MobilePay backend (within the given date range if such is specified.|
|23|Customer not found|The specified CustomerId was not found in the MobilePay backend.|
|43|OrderId and CustomerId in input does not match|The specified CustomerId does not exist for the specified OrderId.|
|44|Call fails for non-technical reasons|The call has failed for a reason which cannot be disclosed. Stating the specific reason may disclose customer sensitive information like reaching daily MobilePay limit or having credit card revoked.|
|45|Transaction is already captured|It is not possible to cancel or capture the transaction.|
|46|Transaction is already cancelled|It is not possible to cancel or capture the transaction.|
|47|Reservation not found|It is not possible to cancel or capture the transaction.|
|99|Technical error|The call did not succeed because of a technical error in the backend. The technical error should be examined by Danske Bank.|

### Return and reason codes ###
The tables below describe the values of the fields *ReturnCode* and *ReasonCode*, which are stated in the response from the CancelV02 services.

#### Return codes ####
|Value|Text|Description|
|:----|:---|:----------|
|00|Ok|Service completed without errors.|
|04|Warning|Service completed with validation errors.|
|08|Error|Service completed with errors.|
|24|Severe error|Service completed with errors that must be examined by Danske Bank.|

#### Reason codes ####
- Reason codes 1-19 are related to input validation errors.
- Reason codes 20-39 are related to other errors regarding specific input parameters.
- Reason codes 40-97 are related for other types of errors.
- Reason code 98 is a deadlock or timeout.
- Reason code 99 is related to errors that must be examined by Danske Bank.

|Value|Text|Description|
|:----|:---|:----------|
|00|Ok|Completed without errors|
|01|Invalid OrderId|OrderId is not specified or has an invalid value.|
|02|Invalid MerchantId|MerchantId is not specified or has an invalid value.|
|03|Invalid CustomerId|CustomerId is not specified or has an invalid value.|
|04|Invalid Test flag |Test flag is not specified has an invalid value.|
|09|Invalid Date|The date specified is invalid. DateFrom must be less than or equal to DateTo or format is wrong.|
|20|Merchant not found|The specified MerchantId could not be confirmed as an active Danske Bank customer.|
|21|Order not found|The specified OrderId for an existing order could not be found in the MobilePay backend (within the given date range if such is specified).|
|23|Customer not found|The specified CustomerId could not be found in the MobilePay backend.|
|43|CustomerId and OrderId in input does not match|The OrderId does not exist for the specified CustomerId.|
|44|Call fails for non-technical reasons|The call has failed for a reason which cannot be disclosed. Stating the specific reason may disclose customer sensitive information (e.g. reaching daily MobilePay limit or having credit card revoked).|
|45|Transaction already captured|It is not possible to cancel a reservation, that has already been captured.|
|46|Transaction already cancelled|It is not possible to cancel a reservation, that has already been cancelled.|
|47|Reservation not found|It is not possible to cancel the reservation.|
|99|Technical error|The call did not succeed due to a technical error in the backend. The technical error must be examined by Danske Bank.|
